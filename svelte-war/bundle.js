var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(r)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e,n){const r=e.subscribe(n);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}function u(t,e,r){return t[1]?n({},n(e.$$scope.ctx,t[1](r?r(e):{}))):e.$$scope.ctx}let l="undefined"!=typeof window?()=>window.performance.now():()=>Date.now();const f=new Set;let $,d=!1;function m(){f.forEach(t=>{t[0](l())||(f.delete(t),t[1]())}),(d=f.size>0)&&requestAnimationFrame(m)}function p(t){let e;return d||(d=!0,requestAnimationFrame(m)),{promise:new Promise(n=>{f.add(e=[t,n])}),abort(){f.delete(e)}}}function g(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function k(){return w("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function L(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}let D,E=0,N={};function S(t,e,n,r,o,s,i,c=0){const a=16.666/r;let u="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*s(t);u+=100*t+`%{${i(r,1-r)}}\n`}const l=u+`100% {${i(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${c}`;if(!N[f]){if(!$){const t=v("style");document.head.appendChild(t),$=t.sheet}N[f]=!0,$.insertRule(`@keyframes ${f} ${l}`,$.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${o}ms 1 both`,E+=1,f}function A(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--E&&requestAnimationFrame(()=>{if(E)return;let t=$.cssRules.length;for(;t--;)$.deleteRule(t);N={}})}function P(t){D=t}function M(t){(function(){if(!D)throw new Error("Function called outside component initialization");return D})().$$.on_destroy.push(t)}const C=[],z=Promise.resolve();let q=!1;const O=[],R=[],j=[];function B(t){R.push(t)}function I(){const t=new Set;do{for(;C.length;){const t=C.shift();P(t),G(t.$$)}for(;O.length;)O.shift()();for(;R.length;){const e=R.pop();t.has(e)||(e(),t.add(e))}}while(C.length);for(;j.length;)j.pop()();q=!1}function G(t){t.fragment&&(t.update(t.dirty),s(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(B))}let Y,V;function T(){return Y||(Y=Promise.resolve()).then(()=>{Y=null}),Y}function H(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}function J(){V={remaining:0,callbacks:[]}}function K(){V.remaining||s(V.callbacks)}function Q(t){V.callbacks.push(t)}function U(n,r,o,i){let c=r(n,o),a=i?0:1,u=null,f=null,$=null;function d(){$&&A(n,$)}function m(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(r){const{delay:o=0,duration:i=300,easing:g=e,tick:h=t,css:y}=c,v={start:l()+o,b:r};r||(v.group=V,V.remaining+=1),u?f=v:(y&&(d(),$=S(n,a,r,i,o,g,y)),r&&h(0,1),u=m(v,i),B(()=>H(n,r,"start")),p(t=>{if(f&&t>f.start&&(u=m(f,i),f=null,H(n,u.b,"start"),y&&(d(),$=S(n,a,u.b,u.duration,0,g,c.css))),u)if(t>=u.end)h(a=u.b,1-a),H(n,u.b,"end"),f||(u.b?d():--u.group.remaining||s(u.group.callbacks)),u=null;else if(t>=u.start){const e=t-u.start;a=u.a+u.d*g(e/u.duration),h(a,1-a)}return!(!u&&!f)}))}return{run(t){"function"==typeof c?T().then(()=>{c=c(),g(t)}):g(t)},end(){d(),u=f=null}}}function W(t,e){Q(()=>{!function(t,e){t.d(1),e.delete(t.key)}(t,e)}),t.o(1)}function X(t,e,n,r,o,s,i,c,a,u,l,f){let $=t.length,d=s.length,m=$;const p={};for(;m--;)p[t[m].key]=m;const g=[],h=new Map,y=new Map;for(m=d;m--;){const t=f(o,s,m),c=n(t);let a=i.get(c);a?r&&a.p(e,t):(a=u(c,t)).c(),h.set(c,g[m]=a),c in p&&y.set(c,Math.abs(m-p[c]))}const v=new Set,b=new Set;function w(t){t.i&&t.i(1),t.m(c,l),i.set(t.key,t),l=t.first,d--}for(;$&&d;){const e=g[d-1],n=t[$-1],r=e.key,o=n.key;e===n?(l=e.first,$--,d--):h.has(o)?!i.has(r)||v.has(r)?w(e):b.has(o)?$--:y.get(r)>y.get(o)?(b.add(r),w(e)):(v.add(o),$--):(a(n,i),$--)}for(;$--;){const e=t[$];h.has(e.key)||a(e,i)}for(;d;)w(g[d-1]);return g}function Z(t,e,n){const{fragment:o,on_mount:c,on_destroy:a,after_render:u}=t.$$;o.m(e,n),B(()=>{const e=c.map(r).filter(i);a?a.push(...e):s(e),t.$$.on_mount=[]}),u.forEach(B)}function tt(t,e){t.$$.dirty||(C.push(t),q||(q=!0,z.then(I)),t.$$.dirty=o()),t.$$.dirty[e]=!0}function et(e,n,r,i,c,a){const u=D;P(e);const l=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:null};let $=!1;var d;f.ctx=r?r(e,l,(t,n)=>{f.ctx&&c(f.ctx[t],f.ctx[t]=n)&&(f.bound[t]&&f.bound[t](n),$&&tt(e,t))}):l,f.update(),$=!0,s(f.before_render),f.fragment=i(f.ctx),n.target&&(n.hydrate?f.fragment.l((d=n.target,Array.from(d.childNodes))):f.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),Z(e,n.target,n.anchor),I()),P(u)}class nt{$destroy(){var e,n;n=!0,(e=this).$$&&(s(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function rt(t){var e,r,o,i;const c=t.$$slots.default,a=function(t,e,n){if(t){const r=u(t,e,n);return t[0](r)}}(c,t,null);return{c(){e=v("button"),a&&a.c(),e.className=r=`iconButton ${t.active?"active":""}`+" svelte-121zshi",i=[F(e,"mousedown",t.start),F(e,"touchstart",t.start),F(e,"mouseup",t.release),F(e,"touchend",t.release)]},l(t){a&&a.l(button_nodes)},m(t,n){h(t,e,n),a&&a.m(e,null),o=!0},p(t,s){a&&a.p&&t.$$scope&&a.p(function(t,e,r,o){return t[1]?n({},n(e.$$scope.changed||{},t[1](o?o(r):{}))):e.$$scope.changed||{}}(c,s,t,null),u(c,s,null)),o&&!t.active||r===(r=`iconButton ${s.active?"active":""}`+" svelte-121zshi")||(e.className=r)},i(t){o||(a&&a.i&&a.i(t),o=!0)},o(t){a&&a.o&&a.o(t),o=!1},d(t){t&&y(e),a&&a.d(t),s(i)}}}function ot(t,e,n){let{start:r,release:o,active:s}=e,{$$slots:i={},$$scope:c}=e;return t.$set=(t=>{"start"in t&&n("start",r=t.start),"release"in t&&n("release",o=t.release),"active"in t&&n("active",s=t.active),"$$scope"in t&&n("$$scope",c=t.$$scope)}),{start:r,release:o,active:s,$$slots:i,$$scope:c}}class st extends nt{constructor(t){super(),et(this,t,ot,rt,c,["start","release","active"])}}function it(e){var n,r;return{c(){n=b("svg"),L(r=b("path"),"d","M222.979,5.424C219.364,1.807,215.08,0,210.132,0c-4.949,0-9.233,1.807-12.848,5.424L69.378,133.331\n    c-3.615,3.617-5.424,7.898-5.424,12.847c0,4.949,1.809,9.233,5.424,12.847l127.906,127.907c3.614,3.617,7.898,5.428,12.848,5.428\n    c4.948,0,9.232-1.811,12.847-5.428c3.617-3.614,5.427-7.898,5.427-12.847V18.271C228.405,13.322,226.596,9.042,222.979,5.424z"),L(n,"width","40px"),L(n,"height","40px"),L(n,"viewBox","0 0 292.359 292.359"),L(n,"transform","translate(-5 0)")},m(t,e){h(t,n,e),g(n,r)},p:t,i:t,o:t,d(t){t&&y(n)}}}class ct extends nt{constructor(t){super(),et(this,t,null,it,c,[])}}function at(e){var n,r;return{c(){n=b("svg"),L(r=b("path"),"d","M222.979,5.424C219.364,1.807,215.08,0,210.132,0c-4.949,0-9.233,1.807-12.848,5.424L69.378,133.331\n    c-3.615,3.617-5.424,7.898-5.424,12.847c0,4.949,1.809,9.233,5.424,12.847l127.906,127.907c3.614,3.617,7.898,5.428,12.848,5.428\n    c4.948,0,9.232-1.811,12.847-5.428c3.617-3.614,5.427-7.898,5.427-12.847V18.271C228.405,13.322,226.596,9.042,222.979,5.424z"),L(n,"width","40px"),L(n,"height","40px"),L(n,"viewBox","0 0 292.359 292.359"),L(n,"transform","translate(5 0) rotate(180)")},m(t,e){h(t,n,e),g(n,r)},p:t,i:t,o:t,d(t){t&&y(n)}}}class ut extends nt{constructor(t){super(),et(this,t,null,at,c,[])}}function lt(e){var n,r,o,s,i;return{c(){n=b("svg"),r=b("path"),o=b("path"),s=b("path"),i=b("path"),L(r,"d","m341.652344 38.511719-37.839844 37.839843 46.960938 46.960938\n    37.839843-37.839844c8.503907-8.527344 15-18.839844\n    19.019531-30.191406l19.492188-55.28125-55.28125 19.492188c-11.351562\n    4.019531-21.664062 10.515624-30.191406 19.019531zm0 0"),L(o,"d","m258.65625 99.078125 69.390625 69.390625\n    14.425781-33.65625-50.160156-50.160156zm0 0"),L(s,"d","m.0429688 352.972656 28.2812502-28.285156 74.113281 74.113281-28.28125\n    28.28125zm0 0"),L(i,"d","m38.226562 314.789062 208.167969-208.171874 74.113281\n    74.113281-208.171874 208.171875zm0 0"),L(n,"height","40px"),L(n,"viewBox","0 0 427 427.08344"),L(n,"width","40px")},m(t,e){h(t,n,e),g(n,r),g(n,o),g(n,s),g(n,i)},p:t,i:t,o:t,d(t){t&&y(n)}}}class ft extends nt{constructor(t){super(),et(this,t,null,lt,c,[])}}function $t(){}function dt(t,e=$t){let n;const r=[];function o(e){if(s=e,(o=t)!=o?s==s:o!==s||o&&"object"==typeof o||"function"==typeof o){if(t=e,!n)return;r.forEach(t=>t[1]()),r.forEach(e=>e[0](t))}var o,s}return{set:o,update:function(e){o(e(t))},subscribe:function(s,i=$t){const c=[s,i];return r.push(c),1===r.length&&(n=e(o)||$t),s(t),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&n()}}}}function mt(t){let e;return t.subscribe(t=>e=t)(),e}const pt=dt(null),gt=dt(0),ht=dt(!1),yt=dt(0),vt=dt([]);function bt(t){var e,n=new ct({});return{c(){n.$$.fragment.c()},m(t,r){Z(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function wt(t){var e,n=new ut({});return{c(){n.$$.fragment.c()},m(t,r){Z(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function xt(t){var e,n=new ft({});return{c(){n.$$.fragment.c()},m(t,r){Z(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function kt(t){var e,n,r,o,s,i,c=new st({props:{start:t.setDirectionLeft,release:t.resetDirection,active:"left"===t.$direction,$$slots:{default:[bt]},$$scope:{ctx:t}}}),a=new st({props:{start:t.setDirectionRight,release:t.resetDirection,active:"right"===t.$direction,$$slots:{default:[wt]},$$scope:{ctx:t}}}),u=new st({props:{start:t.startFire,release:t.stopFire,active:t.$isFiring,$$slots:{default:[xt]},$$scope:{ctx:t}}});return{c(){e=v("div"),n=v("div"),r=v("div"),c.$$.fragment.c(),o=x(),a.$$.fragment.c(),s=x(),u.$$.fragment.c(),r.className="arrowGroup svelte-1d9v1w8",n.className="container svelte-1d9v1w8",e.className="controls svelte-1d9v1w8"},m(t,l){h(t,e,l),g(e,n),g(n,r),Z(c,r,null),g(r,o),Z(a,r,null),g(n,s),Z(u,n,null),i=!0},p(t,e){var n={};t.setDirectionLeft&&(n.start=e.setDirectionLeft),t.resetDirection&&(n.release=e.resetDirection),t.$direction&&(n.active="left"===e.$direction),t.$$scope&&(n.$$scope={changed:t,ctx:e}),c.$set(n);var r={};t.setDirectionRight&&(r.start=e.setDirectionRight),t.resetDirection&&(r.release=e.resetDirection),t.$direction&&(r.active="right"===e.$direction),t.$$scope&&(r.$$scope={changed:t,ctx:e}),a.$set(r);var o={};t.startFire&&(o.start=e.startFire),t.stopFire&&(o.release=e.stopFire),t.$isFiring&&(o.active=e.$isFiring),t.$$scope&&(o.$$scope={changed:t,ctx:e}),u.$set(o)},i(t){i||(c.$$.fragment.i(t),a.$$.fragment.i(t),u.$$.fragment.i(t),i=!0)},o(t){c.$$.fragment.o(t),a.$$.fragment.o(t),u.$$.fragment.o(t),i=!1},d(t){t&&y(e),c.$destroy(),a.$destroy(),u.$destroy()}}}function Ft(t,e,n){let r,o;a(t,pt,t=>{n("$direction",r=t)}),a(t,ht,t=>{n("$isFiring",o=t)});const s=()=>pt.set(null),i=()=>pt.set("left"),c=()=>pt.set("right"),u=()=>ht.set(!0),l=()=>ht.set(!1);function f(t){window.requestAnimationFrame(()=>{switch(t.keyCode){case 39:c();break;case 37:i();break;case 32:u();break;default:return}})}function $(t){window.requestAnimationFrame(()=>{switch(t.keyCode){case 39:case 37:s();break;case 32:l();break;default:return}})}return document.body.addEventListener("keydown",f,!1),document.body.addEventListener("keyup",$,!1),M(()=>{document.body.removeEventListener("keydown",f),document.body.removeEventListener("keyup",$)}),{resetDirection:s,setDirectionLeft:i,setDirectionRight:c,startFire:u,stopFire:l,$direction:r,$isFiring:o}}class Lt extends nt{constructor(t){super(),et(this,t,Ft,kt,c,[])}}function _t(e){var n,r,o;return{c(){n=v("div"),r=w(e.fps),o=w(" FPS"),n.className="fps svelte-jkyvnt"},m(t,e){h(t,n,e),g(n,r),g(n,o)},p(t,e){t.fps&&_(r,e.fps)},i:t,o:t,d(t){t&&y(n)}}}function Dt(t,e,n){let r=null;const o=[];let s;return M(()=>{window.cancelAnimationFrame(r)}),n("tickId",r=function t(){n("tickId",r=window.requestAnimationFrame(()=>{const e=performance.now();for(;o.length>0&&o[0]<=e-1e3;)o.shift();o.push(e),n("fps",s=o.length),t()}))}()),{fps:s}}class Et extends nt{constructor(t){super(),et(this,t,Dt,_t,c,[])}}function Nt(e){var n,r,o;return{c(){n=b("g"),L(r=b("rect"),"width","8"),L(r,"height","60"),L(r,"fill","#212121"),L(n,"class","cannon svelte-r8lgo8"),L(n,"transform",o=`translate(236, 700) rotate(${e.$angle})`)},m(t,e){h(t,n,e),g(n,r)},p(t,e){t.$angle&&o!==(o=`translate(236, 700) rotate(${e.$angle})`)&&L(n,"transform",o)},i:t,o:t,d(t){t&&y(n)}}}function St(t,e,n){let r;return a(t,gt,t=>{n("$angle",r=t)}),{$angle:r}}class At extends nt{constructor(t){super(),et(this,t,St,Nt,c,[])}}function Pt(t){const e=t-1;return e*e*e+1}function Mt(t,{delay:e=0,duration:n=400}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,css:t=>`opacity: ${t*r}`}}function Ct(t,{delay:e=0,duration:n=400,easing:r=Pt,x:o=0,y:s=0,opacity:i=0}){const c=getComputedStyle(t),a=+c.opacity,u="none"===c.transform?"":c.transform,l=a*(1-i);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${u} translate(${(1-t)*o}px, ${(1-t)*s}px);\n\t\t\topacity: ${a-l*e}`}}function zt(n){var r,o,i,c,a;return{c(){r=b("g"),L(o=b("rect"),"width","30"),L(o,"height","30"),L(o,"fill","#212121"),L(r,"transform",i=`translate(${n.enemy.x}, ${n.enemy.y})`)},m(t,e){h(t,r,e),g(r,o),a=!0},p(t,e){a&&!t.enemy||i===(i=`translate(${e.enemy.x}, ${e.enemy.y})`)||L(r,"transform",i)},i(t){a||(c&&c.end(1),a=!0)},o(n){n&&(c=function(n,r,o){let i,c=r(n,o),a=!0;const u=V;function f(){const{delay:r=0,duration:o=300,easing:f=e,tick:$=t,css:d}=c;d&&(i=S(n,1,0,o,r,f,d));const m=l()+r,g=m+o;p(t=>{if(a){if(t>=g)return $(0,1),--u.remaining||s(u.callbacks),!1;if(t>=m){const e=f((t-m)/o);$(1-e,e)}}return a})}return u.remaining+=1,"function"==typeof c?T().then(()=>{c=c(),f()}):f(),{end(t){t&&c.tick&&c.tick(1,0),a&&(i&&A(n,i),a=!1)}}}(r,Ct,{y:-5,duration:200})),a=!1},d(t){t&&(y(r),c&&c.end())}}}function qt(t,e,n){let{enemy:r}=e;return t.$set=(t=>{"enemy"in t&&n("enemy",r=t.enemy)}),{enemy:r}}class Ot extends nt{constructor(t){super(),et(this,t,qt,zt,c,["enemy"])}}function Rt(e){var n,r,o;return{c(){n=b("g"),L(r=b("rect"),"width","3"),L(r,"height","5"),L(r,"fill","#212121"),L(n,"transform",o=`translate(${e.bullet.x}, ${e.bullet.y}) rotate(${e.bullet.angle})`)},m(t,e){h(t,n,e),g(n,r)},p(t,e){t.bullet&&o!==(o=`translate(${e.bullet.x}, ${e.bullet.y}) rotate(${e.bullet.angle})`)&&L(n,"transform",o)},i:t,o:t,d(t){t&&y(n)}}}function jt(t,e,n){let{bullet:r}=e;return t.$set=(t=>{"bullet"in t&&n("bullet",r=t.bullet)}),{bullet:r}}class Bt extends nt{constructor(t){super(),et(this,t,jt,Rt,c,["bullet"])}}const It=dt(!1),Gt=dt(0),Yt=dt(localStorage.getItem("maxScore")||0);function Vt(e){var n,r,o;return{c(){n=v("div"),r=w("Score: "),o=w(e.$score),n.className="score svelte-i9b0y5"},m(t,e){h(t,n,e),g(n,r),g(n,o)},p(t,e){t.$score&&_(o,e.$score)},i:t,o:t,d(t){t&&y(n)}}}function Tt(t,e,n){let r;return a(t,Gt,t=>{n("$score",r=t)}),{$score:r}}class Ht extends nt{constructor(t){super(),et(this,t,Tt,Vt,c,[])}}const Jt=dt([]),Kt=dt(.5),Qt=dt(0),Ut=dt(3e3);function Wt(t,e,n){const r=Object.create(t);return r.bullet=e[n],r}function Xt(t,e,n){const r=Object.create(t);return r.enemy=e[n],r}function Zt(t,e){var n,r,o=new Ot({props:{enemy:e.enemy}});return{key:t,first:null,c(){n=k(),o.$$.fragment.c(),this.first=n},m(t,e){h(t,n,e),Z(o,t,e),r=!0},p(t,e){var n={};t.$enemyList&&(n.enemy=e.enemy),o.$set(n)},i(t){r||(o.$$.fragment.i(t),r=!0)},o(t){o.$$.fragment.o(t),r=!1},d(t){t&&y(n),o.$destroy(t)}}}function te(t,e){var n,r,o=new Bt({props:{bullet:e.bullet}});return{key:t,first:null,c(){n=k(),o.$$.fragment.c(),this.first=n},m(t,e){h(t,n,e),Z(o,t,e),r=!0},p(t,e){var n={};t.$bulletList&&(n.bullet=e.bullet),o.$set(n)},i(t){r||(o.$$.fragment.i(t),r=!0)},o(t){o.$$.fragment.o(t),r=!1},d(t){t&&y(n),o.$destroy(t)}}}function ee(t){var e,n,r,o,s,i,c=[],a=new Map,u=[],l=new Map,f=t.$enemyList;const $=t=>t.enemy.id;for(var d=0;d<f.length;d+=1){let e=Xt(t,f,d),n=$(e);a.set(n,c[d]=Zt(n,e))}var m=t.$bulletList;const p=t=>t.bullet.id;for(d=0;d<m.length;d+=1){let e=Wt(t,m,d),n=p(e);l.set(n,u[d]=te(n,e))}var w=new At({}),F=new Ht({});return{c(){for(e=v("div"),n=b("svg"),d=0;d<c.length;d+=1)c[d].c();for(r=k(),d=0;d<u.length;d+=1)u[d].c();o=k(),w.$$.fragment.c(),s=x(),F.$$.fragment.c(),L(n,"viewBox","0 0 480 800"),e.className="container svelte-1a0dmdb"},m(t,a){for(h(t,e,a),g(e,n),d=0;d<c.length;d+=1)c[d].m(n,null);for(g(n,r),d=0;d<u.length;d+=1)u[d].m(n,null);g(n,o),Z(w,n,null),g(e,s),Z(F,e,null),i=!0},p(t,e){const s=e.$enemyList;J(),c=X(c,t,$,1,e,s,a,n,W,Zt,r,Xt),K();const i=e.$bulletList;J(),u=X(u,t,p,1,e,i,l,n,W,te,o,Wt),K()},i(t){if(!i){for(var e=0;e<f.length;e+=1)c[e].i();for(e=0;e<m.length;e+=1)u[e].i();w.$$.fragment.i(t),F.$$.fragment.i(t),i=!0}},o(t){for(d=0;d<c.length;d+=1)c[d].o();for(d=0;d<u.length;d+=1)u[d].o();w.$$.fragment.o(t),F.$$.fragment.o(t),i=!1},d(t){for(t&&y(e),d=0;d<c.length;d+=1)c[d].d();for(d=0;d<u.length;d+=1)u[d].d();w.$destroy(),F.$destroy()}}}function ne(t,e,n){let r,o;return a(t,Jt,t=>{n("$enemyList",r=t)}),a(t,vt,t=>{n("$bulletList",o=t)}),{$enemyList:r,$bulletList:o}}class re extends nt{constructor(t){super(),et(this,t,ne,ee,c,[])}}function oe(){const t=mt(gt);switch(mt(pt)){case"left":t>-45&&gt.update(t=>t-.4);break;case"right":t<45&&gt.update(t=>t+.4)}}function se(){mt(ht)&&Date.now()-mt(yt)>800&&(yt.set(Date.now()),vt.update(t=>[...t,{x:238,y:760,angle:mt(gt),id:()=>Math.random()+Date.now()}]))}function ie(){vt.update(t=>t.map(t=>({...t,y:t.y-20,x:(780-t.y)*Math.tan(t.angle*Math.PI/180)+238})))}function ce(){vt.update(t=>t.filter(t=>t.y>0))}function ae(){Date.now()-mt(Qt)>mt(Ut)&&(Qt.set(Date.now()),Jt.update(t=>[...t,{x:Math.floor(449*Math.random())+1,y:0,id:()=>Math.random()+Date.now(),speed:mt(Kt)}]))}function ue(){Jt.update(t=>t.map(t=>({...t,y:t.y+t.speed})))}const le=30,fe=5,$e=30,de=8;function me(){mt(vt).forEach(t=>{mt(Jt).forEach(e=>{t.x<e.x+le&&t.x+fe>e.x&&t.y<e.y+$e&&t.y+de>e.y&&(!function(t){vt.update(e=>e.filter(e=>e.id!==t))}(t.id),function(t){Jt.update(e=>e.filter(e=>e.id!==t))}(e.id),Gt.update(t=>t+1),Math.random()>.3?Ut.update(t=>t>500?t-50:t):Kt.update(t=>t+.05))})})}function pe(){mt(Jt).find(({y:t})=>t>780)&&function(){Jt.set([]),vt.set([]),Kt.set(.5),Ut.set(3e3),It.set(!1);const t=mt(Gt);t>mt(Yt)&&(Yt.set(t),localStorage.setItem("maxScore",t))}()}const ge=()=>{It.set(!0),Gt.set(0),function t(e){window.requestAnimationFrame(()=>{e.forEach(t=>{"function"==typeof t&&t()}),mt(It)&&t(e)})}([oe,se,ae,ue,pe,ie,me,ce])};function he(t){var e;return{c(){(e=v("div")).textContent="Game Over",e.className="message svelte-1ttd451"},m(t,n){h(t,e,n)},d(t){t&&y(e)}}}function ye(t){var e,n,r;return{c(){e=v("div"),n=w("Your score: "),r=w(t.$score),e.className="message svelte-1ttd451"},m(t,o){h(t,e,o),g(e,n),g(e,r)},p(t,e){t.$score&&_(r,e.$score)},d(t){t&&y(e)}}}function ve(t){var e,n,r,o,s,i,c,a,u,l,f,$,d,m,p=!1===t.$isPlaying?" AGAIN":"",b=!1===t.$isPlaying&&he(),k=t.$score>0&&ye(t);return{c(){e=v("div"),n=v("div"),b&&b.c(),r=x(),k&&k.c(),o=x(),s=v("div"),i=w("Your record: "),c=w(t.$maxScore),a=x(),u=v("div"),l=w("PLAY"),f=w(p),s.className="message svelte-1ttd451",u.className="button svelte-1ttd451",n.className="modal svelte-1ttd451",e.className="overlay svelte-1ttd451",m=F(u,"click",ge)},m(t,$){h(t,e,$),g(e,n),b&&b.m(n,null),g(n,r),k&&k.m(n,null),g(n,o),g(n,s),g(s,i),g(s,c),g(n,a),g(n,u),g(u,l),g(u,f),d=!0},p(t,e){!1===e.$isPlaying?b||((b=he()).c(),b.m(n,r)):b&&(b.d(1),b=null),e.$score>0?k?k.p(t,e):((k=ye(e)).c(),k.m(n,o)):k&&(k.d(1),k=null),d&&!t.$maxScore||_(c,e.$maxScore),d&&!t.$isPlaying||p===(p=!1===e.$isPlaying?" AGAIN":"")||_(f,p)},i(t){d||(B(()=>{$||($=U(e,Mt,{},!0)),$.run(1)}),d=!0)},o(t){$||($=U(e,Mt,{},!1)),$.run(0),d=!1},d(t){t&&y(e),b&&b.d(),k&&k.d(),t&&$&&$.end(),m()}}}function be(t,e,n){let r,o,s;return a(t,It,t=>{n("$isPlaying",r=t)}),a(t,Gt,t=>{n("$score",o=t)}),a(t,Yt,t=>{n("$maxScore",s=t)}),{$isPlaying:r,$score:o,$maxScore:s}}class we extends nt{constructor(t){super(),et(this,t,be,ve,c,[])}}function xe(t){var e,n=new we({});return{c(){n.$$.fragment.c()},m(t,r){Z(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function ke(t){var e,n,r,o,s,i=new re({}),c=new Et({}),a=new Lt({}),u=!t.$isPlaying&&xe();return{c(){i.$$.fragment.c(),e=x(),c.$$.fragment.c(),n=x(),a.$$.fragment.c(),r=x(),o=v("div"),u&&u.c()},m(t,l){Z(i,t,l),h(t,e,l),Z(c,t,l),h(t,n,l),Z(a,t,l),h(t,r,l),h(t,o,l),u&&u.m(o,null),s=!0},p(t,e){e.$isPlaying?u&&(J(),Q(()=>{u.d(1),u=null}),u.o(1),K()):u?u.i(1):((u=xe()).c(),u.i(1),u.m(o,null))},i(t){s||(i.$$.fragment.i(t),c.$$.fragment.i(t),a.$$.fragment.i(t),u&&u.i(),s=!0)},o(t){i.$$.fragment.o(t),c.$$.fragment.o(t),a.$$.fragment.o(t),u&&u.o(),s=!1},d(t){i.$destroy(t),t&&y(e),c.$destroy(t),t&&y(n),a.$destroy(t),t&&(y(r),y(o)),u&&u.d()}}}function Fe(t,e,n){let r;return a(t,It,t=>{n("$isPlaying",r=t)}),{$isPlaying:r}}return new class extends nt{constructor(t){super(),et(this,t,Fe,ke,c,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
