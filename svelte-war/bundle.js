var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e,n){const r=e.subscribe(n);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}function a(t,n,r){return t[1]?e({},e(n.$$scope.ctx,t[1](r?r(n):{}))):n.$$scope.ctx}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function g(){return m("")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}let v;function b(t){v=t}const x=[],w=Promise.resolve();let D=!1;const L=[],_=[],k=[];function F(t){_.push(t)}function M(){const t=new Set;do{for(;x.length;){const t=x.shift();b(t),E(t.$$)}for(;L.length;)L.shift()();for(;_.length;){const e=_.pop();t.has(e)||(e(),t.add(e))}}while(x.length);for(;k.length;)k.pop()();D=!1}function E(t){t.fragment&&(t.update(t.dirty),o(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(F))}let N;function z(){N={remaining:0,callbacks:[]}}function B(){N.remaining||o(N.callbacks)}function C(t,e){var n;n=(()=>{!function(t,e){t.d(1),e.delete(t.key)}(t,e)}),N.callbacks.push(n),t.o(1)}function j(t,e,n,r,o,s,c,i,a,l,u,$){let f=t.length,d=s.length,m=f;const p={};for(;m--;)p[t[m].key]=m;const g=[],h=new Map,y=new Map;for(m=d;m--;){const t=$(o,s,m),i=n(t);let a=c.get(i);a?r&&a.p(e,t):(a=l(i,t)).c(),h.set(i,g[m]=a),i in p&&y.set(i,Math.abs(m-p[i]))}const v=new Set,b=new Set;function x(t){t.i&&t.i(1),t.m(i,u),c.set(t.key,t),u=t.first,d--}for(;f&&d;){const e=g[d-1],n=t[f-1],r=e.key,o=n.key;e===n?(u=e.first,f--,d--):h.has(o)?!c.has(r)||v.has(r)?x(e):b.has(o)?f--:y.get(r)>y.get(o)?(b.add(r),x(e)):(v.add(o),f--):(a(n,c),f--)}for(;f--;){const e=t[f];h.has(e.key)||a(e,c)}for(;d;)x(g[d-1]);return g}function O(t,e,r){const{fragment:c,on_mount:i,on_destroy:a,after_render:l}=t.$$;c.m(e,r),F(()=>{const e=i.map(n).filter(s);a?a.push(...e):o(e),t.$$.on_mount=[]}),l.forEach(F)}function A(t,e){t.$$.dirty||(x.push(t),D||(D=!0,w.then(M)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function R(e,n,s,c,i,a){const l=v;b(e);const u=n.props||{},$=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var d;$.ctx=s?s(e,u,(t,n)=>{$.ctx&&i($.ctx[t],$.ctx[t]=n)&&($.bound[t]&&$.bound[t](n),f&&A(e,t))}):u,$.update(),f=!0,o($.before_render),$.fragment=c($.ctx),n.target&&(n.hydrate?$.fragment.l((d=n.target,Array.from(d.childNodes))):$.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),O(e,n.target,n.anchor),M()),b(l)}class S{$destroy(){var e,n;n=!0,(e=this).$$&&(o(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function q(t){var n,r,s,c;const i=t.$$slots.default,l=function(t,e,n){if(t){const r=a(t,e,n);return t[0](r)}}(i,t,null);return{c(){n=f("button"),l&&l.c(),n.className=r=`iconButton ${t.active?"active":""}`+" svelte-121zshi",c=[h(n,"mousedown",t.start),h(n,"touchstart",t.start),h(n,"mouseup",t.release),h(n,"touchend",t.release)]},l(t){l&&l.l(button_nodes)},m(t,e){u(t,n,e),l&&l.m(n,null),s=!0},p(t,o){l&&l.p&&t.$$scope&&l.p(function(t,n,r,o){return t[1]?e({},e(n.$$scope.changed||{},t[1](o?o(r):{}))):n.$$scope.changed||{}}(i,o,t,null),a(i,o,null)),s&&!t.active||r===(r=`iconButton ${o.active?"active":""}`+" svelte-121zshi")||(n.className=r)},i(t){s||(l&&l.i&&l.i(t),s=!0)},o(t){l&&l.o&&l.o(t),s=!1},d(t){t&&$(n),l&&l.d(t),o(c)}}}function P(t,e,n){let{start:r,release:o,active:s}=e,{$$slots:c={},$$scope:i}=e;return t.$set=(t=>{"start"in t&&n("start",r=t.start),"release"in t&&n("release",o=t.release),"active"in t&&n("active",s=t.active),"$$scope"in t&&n("$$scope",i=t.$$scope)}),{start:r,release:o,active:s,$$slots:c,$$scope:i}}class V extends S{constructor(t){super(),R(this,t,P,q,c,["start","release","active"])}}function G(e){var n,r;return{c(){n=d("svg"),y(r=d("path"),"d","M222.979,5.424C219.364,1.807,215.08,0,210.132,0c-4.949,0-9.233,1.807-12.848,5.424L69.378,133.331\n    c-3.615,3.617-5.424,7.898-5.424,12.847c0,4.949,1.809,9.233,5.424,12.847l127.906,127.907c3.614,3.617,7.898,5.428,12.848,5.428\n    c4.948,0,9.232-1.811,12.847-5.428c3.617-3.614,5.427-7.898,5.427-12.847V18.271C228.405,13.322,226.596,9.042,222.979,5.424z"),y(n,"width","40px"),y(n,"height","40px"),y(n,"viewBox","0 0 292.359 292.359"),y(n,"transform","translate(-5 0)")},m(t,e){u(t,n,e),l(n,r)},p:t,i:t,o:t,d(t){t&&$(n)}}}class I extends S{constructor(t){super(),R(this,t,null,G,c,[])}}function T(e){var n,r;return{c(){n=d("svg"),y(r=d("path"),"d","M222.979,5.424C219.364,1.807,215.08,0,210.132,0c-4.949,0-9.233,1.807-12.848,5.424L69.378,133.331\n    c-3.615,3.617-5.424,7.898-5.424,12.847c0,4.949,1.809,9.233,5.424,12.847l127.906,127.907c3.614,3.617,7.898,5.428,12.848,5.428\n    c4.948,0,9.232-1.811,12.847-5.428c3.617-3.614,5.427-7.898,5.427-12.847V18.271C228.405,13.322,226.596,9.042,222.979,5.424z"),y(n,"width","40px"),y(n,"height","40px"),y(n,"viewBox","0 0 292.359 292.359"),y(n,"transform","translate(5 0) rotate(180)")},m(t,e){u(t,n,e),l(n,r)},p:t,i:t,o:t,d(t){t&&$(n)}}}class H extends S{constructor(t){super(),R(this,t,null,T,c,[])}}function J(e){var n,r,o,s,c;return{c(){n=d("svg"),r=d("path"),o=d("path"),s=d("path"),c=d("path"),y(r,"d","m341.652344 38.511719-37.839844 37.839843 46.960938 46.960938\n    37.839843-37.839844c8.503907-8.527344 15-18.839844\n    19.019531-30.191406l19.492188-55.28125-55.28125 19.492188c-11.351562\n    4.019531-21.664062 10.515624-30.191406 19.019531zm0 0"),y(o,"d","m258.65625 99.078125 69.390625 69.390625\n    14.425781-33.65625-50.160156-50.160156zm0 0"),y(s,"d","m.0429688 352.972656 28.2812502-28.285156 74.113281 74.113281-28.28125\n    28.28125zm0 0"),y(c,"d","m38.226562 314.789062 208.167969-208.171874 74.113281\n    74.113281-208.171874 208.171875zm0 0"),y(n,"height","40px"),y(n,"viewBox","0 0 427 427.08344"),y(n,"width","40px")},m(t,e){u(t,n,e),l(n,r),l(n,o),l(n,s),l(n,c)},p:t,i:t,o:t,d(t){t&&$(n)}}}class K extends S{constructor(t){super(),R(this,t,null,J,c,[])}}function Q(){}function U(t,e=Q){let n;const r=[];function o(e){if(s=e,(o=t)!=o?s==s:o!==s||o&&"object"==typeof o||"function"==typeof o){if(t=e,!n)return;r.forEach(t=>t[1]()),r.forEach(e=>e[0](t))}var o,s}return{set:o,update:function(e){o(e(t))},subscribe:function(s,c=Q){const i=[s,c];return r.push(i),1===r.length&&(n=e(o)||Q),s(t),()=>{const t=r.indexOf(i);-1!==t&&r.splice(t,1),0===r.length&&n()}}}}function W(t){let e;return t.subscribe(t=>e=t)(),e}const X=U(null),Y=U(0),Z=U(!1),tt=U(0),et=U([]);function nt(t){var e,n=new I({});return{c(){n.$$.fragment.c()},m(t,r){O(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function rt(t){var e,n=new H({});return{c(){n.$$.fragment.c()},m(t,r){O(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function ot(t){var e,n=new K({});return{c(){n.$$.fragment.c()},m(t,r){O(n,t,r),e=!0},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function st(t){var e,n,r,o,s,c,i=new V({props:{start:t.setDirectionLeft,release:t.resetDirection,active:"left"===t.$direction,$$slots:{default:[nt]},$$scope:{ctx:t}}}),a=new V({props:{start:t.setDirectionRight,release:t.resetDirection,active:"right"===t.$direction,$$slots:{default:[rt]},$$scope:{ctx:t}}}),d=new V({props:{start:t.startFire,release:t.stopFire,active:t.$isFiring,$$slots:{default:[ot]},$$scope:{ctx:t}}});return{c(){e=f("div"),n=f("div"),r=f("div"),i.$$.fragment.c(),o=p(),a.$$.fragment.c(),s=p(),d.$$.fragment.c(),r.className="arrowGroup svelte-1d9v1w8",n.className="container svelte-1d9v1w8",e.className="controls svelte-1d9v1w8"},m(t,$){u(t,e,$),l(e,n),l(n,r),O(i,r,null),l(r,o),O(a,r,null),l(n,s),O(d,n,null),c=!0},p(t,e){var n={};t.setDirectionLeft&&(n.start=e.setDirectionLeft),t.resetDirection&&(n.release=e.resetDirection),t.$direction&&(n.active="left"===e.$direction),t.$$scope&&(n.$$scope={changed:t,ctx:e}),i.$set(n);var r={};t.setDirectionRight&&(r.start=e.setDirectionRight),t.resetDirection&&(r.release=e.resetDirection),t.$direction&&(r.active="right"===e.$direction),t.$$scope&&(r.$$scope={changed:t,ctx:e}),a.$set(r);var o={};t.startFire&&(o.start=e.startFire),t.stopFire&&(o.release=e.stopFire),t.$isFiring&&(o.active=e.$isFiring),t.$$scope&&(o.$$scope={changed:t,ctx:e}),d.$set(o)},i(t){c||(i.$$.fragment.i(t),a.$$.fragment.i(t),d.$$.fragment.i(t),c=!0)},o(t){i.$$.fragment.o(t),a.$$.fragment.o(t),d.$$.fragment.o(t),c=!1},d(t){t&&$(e),i.$destroy(),a.$destroy(),d.$destroy()}}}function ct(t,e,n){let r,o;i(t,X,t=>{n("$direction",r=t)}),i(t,Z,t=>{n("$isFiring",o=t)});return{resetDirection:()=>X.set(null),setDirectionLeft:()=>X.set("left"),setDirectionRight:()=>X.set("right"),startFire:()=>Z.set(!0),stopFire:()=>Z.set(!1),$direction:r,$isFiring:o}}class it extends S{constructor(t){super(),R(this,t,ct,st,c,[])}}function at(e){var n,r,o;return{c(){n=d("g"),y(r=d("rect"),"width","8"),y(r,"height","60"),y(r,"fill","#212121"),y(n,"class","cannon svelte-r8lgo8"),y(n,"transform",o=`translate(236, 700) rotate(${e.$angle})`)},m(t,e){u(t,n,e),l(n,r)},p(t,e){t.$angle&&o!==(o=`translate(236, 700) rotate(${e.$angle})`)&&y(n,"transform",o)},i:t,o:t,d(t){t&&$(n)}}}function lt(t,e,n){let r;return i(t,Y,t=>{n("$angle",r=t)}),{$angle:r}}class ut extends S{constructor(t){super(),R(this,t,lt,at,c,[])}}function $t(e){var n,r,o;return{c(){n=d("g"),y(r=d("rect"),"width","3"),y(r,"height","5"),y(r,"fill","#212121"),y(n,"transform",o=`translate(${e.bullet.x}, ${e.bullet.y}) rotate(${e.bullet.angle})`)},m(t,e){u(t,n,e),l(n,r)},p(t,e){t.bullet&&o!==(o=`translate(${e.bullet.x}, ${e.bullet.y}) rotate(${e.bullet.angle})`)&&y(n,"transform",o)},i:t,o:t,d(t){t&&$(n)}}}function ft(t,e,n){let{bullet:r}=e;return t.$set=(t=>{"bullet"in t&&n("bullet",r=t.bullet)}),{bullet:r}}class dt extends S{constructor(t){super(),R(this,t,ft,$t,c,["bullet"])}}function mt(e){var n,r,o;return{c(){n=d("g"),y(r=d("rect"),"width","30"),y(r,"height","30"),y(r,"fill","#212121"),y(n,"transform",o=`translate(${e.enemy.x}, ${e.enemy.y})`)},m(t,e){u(t,n,e),l(n,r)},p(t,e){t.enemy&&o!==(o=`translate(${e.enemy.x}, ${e.enemy.y})`)&&y(n,"transform",o)},i:t,o:t,d(t){t&&$(n)}}}function pt(t,e,n){let{enemy:r}=e;return t.$set=(t=>{"enemy"in t&&n("enemy",r=t.enemy)}),{enemy:r}}class gt extends S{constructor(t){super(),R(this,t,pt,mt,c,["enemy"])}}const ht=U([]),yt=U(0);function vt(t,e,n){const r=Object.create(t);return r.bullet=e[n],r}function bt(t,e,n){const r=Object.create(t);return r.enemy=e[n],r}function xt(t,e){var n,r,o=new gt({props:{enemy:e.enemy}});return{key:t,first:null,c(){n=g(),o.$$.fragment.c(),this.first=n},m(t,e){u(t,n,e),O(o,t,e),r=!0},p(t,e){var n={};t.$enemyList&&(n.enemy=e.enemy),o.$set(n)},i(t){r||(o.$$.fragment.i(t),r=!0)},o(t){o.$$.fragment.o(t),r=!1},d(t){t&&$(n),o.$destroy(t)}}}function wt(t,e){var n,r,o=new dt({props:{bullet:e.bullet}});return{key:t,first:null,c(){n=g(),o.$$.fragment.c(),this.first=n},m(t,e){u(t,n,e),O(o,t,e),r=!0},p(t,e){var n={};t.$bulletList&&(n.bullet=e.bullet),o.$set(n)},i(t){r||(o.$$.fragment.i(t),r=!0)},o(t){o.$$.fragment.o(t),r=!1},d(t){t&&$(n),o.$destroy(t)}}}function Dt(t){var e,n,r,o,s,c=[],i=new Map,a=[],m=new Map,p=t.$enemyList;const h=t=>t.enemy.id;for(var v=0;v<p.length;v+=1){let e=bt(t,p,v),n=h(e);i.set(n,c[v]=xt(n,e))}var b=t.$bulletList;const x=t=>t.bullet.id;for(v=0;v<b.length;v+=1){let e=vt(t,b,v),n=x(e);m.set(n,a[v]=wt(n,e))}var w=new ut({});return{c(){for(e=f("div"),n=d("svg"),v=0;v<c.length;v+=1)c[v].c();for(r=g(),v=0;v<a.length;v+=1)a[v].c();o=g(),w.$$.fragment.c(),y(n,"viewBox","0 0 480 800"),e.className="container svelte-1a0dmdb"},m(t,i){for(u(t,e,i),l(e,n),v=0;v<c.length;v+=1)c[v].m(n,null);for(l(n,r),v=0;v<a.length;v+=1)a[v].m(n,null);l(n,o),O(w,n,null),s=!0},p(t,e){const s=e.$enemyList;z(),c=j(c,t,h,1,e,s,i,n,C,xt,r,bt),B();const l=e.$bulletList;z(),a=j(a,t,x,1,e,l,m,n,C,wt,o,vt),B()},i(t){if(!s){for(var e=0;e<p.length;e+=1)c[e].i();for(e=0;e<b.length;e+=1)a[e].i();w.$$.fragment.i(t),s=!0}},o(t){for(v=0;v<c.length;v+=1)c[v].o();for(v=0;v<a.length;v+=1)a[v].o();w.$$.fragment.o(t),s=!1},d(t){for(t&&$(e),v=0;v<c.length;v+=1)c[v].d();for(v=0;v<a.length;v+=1)a[v].d();w.$destroy()}}}function Lt(t,e,n){let r,o;return i(t,ht,t=>{n("$enemyList",r=t)}),i(t,et,t=>{n("$bulletList",o=t)}),{$enemyList:r,$bulletList:o}}class _t extends S{constructor(t){super(),R(this,t,Lt,Dt,c,[])}}const kt=U(null);function Ft(){const t=W(Y);switch(W(X)){case"left":t>-45&&Y.update(t=>t-.4);break;case"right":t<45&&Y.update(t=>t+.4)}}function Mt(){W(Z)&&Date.now()-W(tt)>800&&(tt.set(Date.now()),et.update(t=>[...t,{x:238,y:760,angle:W(Y),id:()=>Math.random()+Date.now()}]))}function Et(){et.update(t=>t.map(t=>({...t,y:t.y-20,x:(780-t.y)*Math.tan(t.angle*Math.PI/180)+238})))}function Nt(){et.update(t=>t.filter(t=>t.y>0))}function zt(){Date.now()-W(yt)>2500&&(yt.set(Date.now()),ht.update(t=>[...t,{x:Math.floor(449*Math.random())+1,y:0,id:()=>Math.random()+Date.now()}]))}function Bt(){ht.update(t=>t.map(t=>({...t,y:t.y+.5})))}const Ct=30,jt=5,Ot=30,At=8;function Rt(){W(et).forEach(t=>{W(ht).forEach(e=>{t.x<e.x+Ct&&t.x+jt>e.x&&t.y<e.y+Ot&&t.y+At>e.y&&(function(t){et.update(e=>e.filter(e=>e.id!==t))}(t.id),function(t){ht.update(e=>e.filter(e=>e.id!==t))}(e.id))})})}const St=()=>{kt.set(!0),function t(e){window.requestAnimationFrame(()=>{e.forEach(t=>{"function"==typeof t&&t()}),W(kt)&&t(e)})}([Ft,Mt,Et,Nt,zt,Bt,Rt])};function qt(e){var n,r,o=new it({}),s=new _t({});return{c(){o.$$.fragment.c(),n=p(),s.$$.fragment.c()},m(t,e){O(o,t,e),u(t,n,e),O(s,t,e),r=!0},p:t,i(t){r||(o.$$.fragment.i(t),s.$$.fragment.i(t),r=!0)},o(t){o.$$.fragment.o(t),s.$$.fragment.o(t),r=!1},d(t){o.$destroy(t),t&&$(n),s.$destroy(t)}}}function Pt(t){return St(),{}}return new class extends S{constructor(t){super(),R(this,t,Pt,qt,c,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
